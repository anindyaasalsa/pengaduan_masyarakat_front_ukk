{"remainingRequest":"c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\src\\views\\Pengaduan.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\src\\views\\Pengaduan.vue","mtime":1617091459640},{"path":"c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\xamppmy\\htdocs\\pengaduan_masyarakat_front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQptb2R1bGUuZXhwb3J0cyA9IHsNCiAgZGF0YTogZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZWFyY2g6ICIiLA0KICAgICAgaWRfcGVuZ2FkdWFuOiAiIiwNCiAgICAgIGlkX3VzZXI6ICIiLA0KICAgICAgbmFtYTogIiIsDQogICAgICB0Z2xfcGVuZ2FkdWFuOiAiIiwNCiAgICAgIGlzaV9sYXBvcmFuOiAiIiwNCiAgICAgIGZvdG86ICIiLA0KICAgICAgc3RhdHVzOiAiIiwNCiAgICAgIHRhbmdnYXBhbjogIiIsDQogICAgICBpZF9rYXRlZ29yaTogIiIsDQogICAgICBhY3Rpb246ICIiLA0KICAgICAgbWVzc2FnZTogIiIsDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHJvd3M6IDAsDQogICAgICBwZXJQYWdlOiAxMCwNCiAgICAgIHRva2VuOiAiIiwNCiAgICAgIHVzZXI6IFtdLA0KICAgICAgcGVuZ2FkdWFuOiBbXSwNCiAgICAgIGthdGVnb3JpOiBbXSwNCiAgICAgIGZpZWxkczogWyJ0YW5nZ2FsIiwgImlzaV9sYXBvcmFuIiwgImthdGVnb3JpIiwgInN0YXR1cyIsICJmb3RvIiwgInRhbmdnYXBhbiJdLA0KICAgIH07DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGdldERhdGE6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGxldCBjb25mID0geyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIHRoaXMudG9rZW4gfSB9Ow0KICAgICAgbGV0IG9mZnNldCA9ICh0aGlzLmN1cnJlbnRQYWdlIC0gMSkgKiB0aGlzLnBlclBhZ2U7DQogICAgICB0aGlzLiRidlRvYXN0LnNob3coImxvYWRpbmdUb2FzdCIpOw0KICAgICAgdGhpcy5heGlvcw0KICAgICAgICAuZ2V0KCIvbWFzeWFyYWthdC9wZW5nYWR1YW4vIiArIHRoaXMucGVyUGFnZSArICIvIiArIG9mZnNldCwgY29uZikNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2Vzcykgew0KICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC5oaWRlKCJsb2FkaW5nVG9hc3QiKTsNCiAgICAgICAgICAgIHRoaXMucGVuZ2FkdWFuID0gcmVzcG9uc2UuZGF0YS5kYXRhLnBlbmdhZHVhbjsNCiAgICAgICAgICAgIHRoaXMudGFuZ2dhcGFuID0gcmVzcG9uc2UuZGF0YS5kYXRhLnBlbmdhZHVhbi50YW5nZ2FwYW47DQogICAgICAgICAgICB0aGlzLnJvd3MgPSByZXNwb25zZS5kYXRhLmRhdGEuY291bnQ7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QuaGlkZSgibG9hZGluZ1RvYXN0Iik7DQogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiR2FnYWwgbWVuYW1waWxrYW4gZGF0YSBQZW5nYWR1YW4uIjsNCiAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3Quc2hvdygibWVzc2FnZSIpOw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibG9naW4iIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIEFkZDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5hY3Rpb24gPSAiaW5zZXJ0IjsNCiAgICAgIHRoaXMuaWRfcGVuZ2FkdWFuID0gIiI7DQogICAgICB0aGlzLnRnbF9wZW5nYWR1YW4gPSAiIjsNCiAgICAgIHRoaXMuaXNpX2xhcG9yYW4gPSAiIjsNCiAgICAgIHRoaXMuaWRfa2F0ZWdvcmkgPSAiIjsNCiAgICAgIHRoaXMuZm90byA9ICIiOw0KICAgICAgdGhpcy5nZXRLYXRlZ29yaURyb3Bkb3duKCk7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm90byIpLnZhbHVlID0gbnVsbDsNCiAgICB9LA0KICAgICBnZXRLYXRlZ29yaURyb3Bkb3duOiBmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIC8vYW1iaWwgZGF0YSBrYXRlZ29yaSB1bnR1ayBkcm9wZG93bg0KICAgICAgICAgICAgICAgIGxldCBjb25mID0geyBoZWFkZXJzOiB7ICJBdXRob3JpemF0aW9uIiA6ICdCZWFyZXIgJyArIHRoaXMudG9rZW4gfSB9Ow0KICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wZXJQYWdlOw0KICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvbWFzeWFyYWthdC9rYXRlZ29yaS8iICsgdGhpcy5wZXJQYWdlICsgIi8iICsgb2Zmc2V0LCBjb25mKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3Rfa2F0ZWdvcmkgPSBbXQ0KICAgICAgICAgICAgICAgICAgICBsZXQganNvbl9rYXRlZ29yaSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5rYXRlZ29yaQ0KICAgICAgICAgICAgICAgICAgICBqc29uX2thdGVnb3JpLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBsaXN0X2thdGVnb3JpLnB1c2goe3ZhbHVlOiBlbGVtZW50LmlkX2thdGVnb3JpLCB0ZXh0OiBlbGVtZW50Lm5hbWFfa2F0ZWdvcml9KQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5rYXRlZ29yaSA9IGxpc3Rfa2F0ZWdvcmkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIA0KICAgIFNhdmU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGxldCBjb25mID0geyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIHRoaXMudG9rZW4gfSB9Ow0KICAgICAgdGhpcy4kYnZUb2FzdC5zaG93KCJsb2FkaW5nVG9hc3QiKTsNCiAgICAgIHRoaXMuYWN0aW9uID09PSAiaW5zZXJ0IjsNCiAgICAgIGxldCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7DQogICAgICBmb3JtLmFwcGVuZCgiaWRfcGVuZ2FkdWFuIiwgdGhpcy5pZF9wZW5nYWR1YW4pOw0KICAgICAgZm9ybS5hcHBlbmQoInRnbF9wZW5nYWR1YW4iLCB0aGlzLnRnbF9wZW5nYWR1YW4pOw0KICAgICAgZm9ybS5hcHBlbmQoImlzaV9sYXBvcmFuIiwgdGhpcy5pc2lfbGFwb3Jhbik7DQogICAgICBmb3JtLmFwcGVuZCgiZm90byIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3RvIikuZmlsZXNbMF0pOw0KICAgICAgZm9ybS5hcHBlbmQoImlkX2thdGVnb3JpIiwgdGhpcy5pZF9rYXRlZ29yaSk7DQoNCiAgICAgIHRoaXMuYXhpb3MucG9zdCgiL21hc3lhcmFrYXQvcGVuZ2FkdWFuIiwgZm9ybSwgY29uZikNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy4kYnZUb2FzdC5oaWRlKCJsb2FkaW5nVG9hc3QiKTsNCiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7DQogICAgICAgICAgdGhpcy4kYnZUb2FzdC5zaG93KCJtZXNzYWdlIik7DQogICAgICAgICAgdGhpcy5nZXREYXRhKCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0S2F0ZWdvcmkoKSB7DQogICAgICBsZXQgY29uZiA9IHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyB0aGlzLnRva2VuIH0gfTsNCiAgICAgIHRoaXMuYXhpb3MuZ2V0KCdrYXRlZ29yaScsIGNvbmYpLnRoZW4oKHJlc3BvbnNlID0+IHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAgICB0aGlzLmthdGVnb3JpID0gcmVzcG9uc2UuZGF0YS5kYXRhLmthdGVnb3JpDQogICAgICB9KSkNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiQXV0aG9yaXphdGlvbiIpOw0KICAgIHRoaXMuZ2V0RGF0YSgpOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Pengaduan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pengaduan.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container mt-3\">\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-12 grid-margin stretch-card\">\r\n          <div class=\"card\">\r\n            <div class=\"card-body\">\r\n              <p class=\"card-title float-left\"><b>Data Pengaduan</b></p>\r\n              <p class=\"card-description float-right\">\r\n                <b-button\r\n                  variant=\"dark\"\r\n                  v-b-modal.modalMasyarakat\r\n                  v-on:click=\"Add\"\r\n                  ><i class=\"mdi mdi-pen btn-icon-prepend\"></i> Input\r\n                  Pengaduan</b-button\r\n                >\r\n              </p>\r\n              <div class=\"table-responsive\">\r\n                <b-table striped hover :items=\"pengaduan\" :fields=\"fields\">\r\n                  <template v-slot:cell(status)=\"data\">\r\n                    <b-badge variant=\"info\" style=\"text-transform: uppercase;\">{{ data.item.status }}</b-badge>\r\n                  </template>\r\n                  <template v-slot:cell(kategori)=\"data\">\r\n                    <b-badge variant=\"warning\" style=\"text-transform: uppercase;\">{{ data.item.kategori.nama_kategori }}</b-badge>\r\n                  </template>\r\n                  <template v-slot:cell(tanggal)=\"data\">\r\n                    {{ data.item.tgl_pengaduan | format }}\r\n                  </template>\r\n                  <template v-slot:cell(tanggapan)=\"data\">\r\n                    {{\r\n                      data.item.tanggapan !== null\r\n                        ? data.item.tanggapan.tanggapan\r\n                        : null\r\n                    }}\r\n                  </template>\r\n                  <template v-slot:cell(status)=\"data\">\r\n                                <b-badge variant=\"info\" v-if=\"data.item.status === 'terkirim'\">{{ data.item.status }}</b-badge>\r\n                                <b-badge variant=\"warning\" v-if=\"data.item.status === 'proses'\">{{ data.item.status }}</b-badge>\r\n                                <b-badge variant=\"success\" v-if=\"data.item.status === 'selesai'\">{{ data.item.status }}</b-badge>\r\n                                <b-badge variant=\"danger\" v-if=\"data.item.status === 'tolak'\">{{ data.item.status }}</b-badge>\r\n                            </template>\r\n                  <template v-slot:cell(foto)=\"data\">\r\n                    <img\r\n                      style=\"width: 200px; height: 100px; border-radius: 5%\"\r\n                      :src=\"'http://localhost:8000/uploads/' + data.item.foto\"\r\n                    />\r\n                  </template>\r\n                </b-table>\r\n\r\n                <b-modal id=\"modalMasyarakat\" @ok=\"Save\">\r\n                  <template v-slot:modal-title> Form Masyarakat</template>\r\n                 \r\n                  <form ref=\"form\">\r\n          <div class=\"form-group\">\r\n            <div class=\"form-group\">\r\n              <label for=\"nama\" class=\"col-form-label\">Tanggal Pengaduan</label>\r\n              <input type=\"date\" name=\"tgl_pengaduan\" class=\"form-control\" id=\"tgl_pengaduan\" placeholder=\"Tgl Pengaduan\" v-model=\"tgl_pengaduan\">\r\n            </div>\r\n             <div class=\"form-group\">\r\n              <label for=\"nama\" class=\"col-form-label\">Isi Laporan</label>\r\n              <input type=\"text\" name=\"isi_laporan\" class=\"form-control\" id=\"isi_laporan\" placeholder=\"Isi Laporan\" v-model=\"isi_laporan\">\r\n            </div>\r\n             \r\n            <div class=\"form-group\">\r\n          <label for=\"kategori\" class=\"col-form-label\">Kategori</label>\r\n          <b-form-select\r\n            id=\"kategori\"\r\n            v-model=\"kategori\"\r\n            :options=\"kategori\"\r\n          ></b-form-select>\r\n        </div>\r\n             <div class=\"form-group\">\r\n              <label for=\"nama\" class=\"col-form-label\">Foto</label>\r\n              <input type=\"file\" name=\"foto\" class=\"form-control\" id=\"foto\" placeholder=\"foto\">\r\n            </div>\r\n          </div>\r\n  \r\n        </form>\r\n                </b-modal>\r\n                <b-pagination\r\n                  v-model=\"currentPage\"\r\n                  :per-page=\"perPage\"\r\n                  :total-rows=\"rows\"\r\n                  align=\"center\"\r\n                  v-on:input=\"pagination\"\r\n                >\r\n                </b-pagination>\r\n\r\n                <b-toast id=\"loadingToast\" title=\"Processing Data\" no-auto-hide>\r\n                  <b-spinner label=\"Spinning\" variant=\"secondary\"></b-spinner>\r\n                  <strong class=\"text-secondary\"> Loading...</strong>\r\n                </b-toast>\r\n\r\n                <!-- toast untuk tampilan message box -->\r\n                <b-toast id=\"message\" title=\"Message\">\r\n                  <strong class=\"text-success\">{{ message }}</strong>\r\n                </b-toast>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nmodule.exports = {\r\n  data: function () {\r\n    return {\r\n      search: \"\",\r\n      id_pengaduan: \"\",\r\n      id_user: \"\",\r\n      nama: \"\",\r\n      tgl_pengaduan: \"\",\r\n      isi_laporan: \"\",\r\n      foto: \"\",\r\n      status: \"\",\r\n      tanggapan: \"\",\r\n      id_kategori: \"\",\r\n      action: \"\",\r\n      message: \"\",\r\n      currentPage: 1,\r\n      rows: 0,\r\n      perPage: 10,\r\n      token: \"\",\r\n      user: [],\r\n      pengaduan: [],\r\n      kategori: [],\r\n      fields: [\"tanggal\", \"isi_laporan\", \"kategori\", \"status\", \"foto\", \"tanggapan\"],\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    getData: function () {\r\n      let conf = { headers: { Authorization: \"Bearer \" + this.token } };\r\n      let offset = (this.currentPage - 1) * this.perPage;\r\n      this.$bvToast.show(\"loadingToast\");\r\n      this.axios\r\n        .get(\"/masyarakat/pengaduan/\" + this.perPage + \"/\" + offset, conf)\r\n        .then((response) => {\r\n          if (response.data.success) {\r\n            this.$bvToast.hide(\"loadingToast\");\r\n            this.pengaduan = response.data.data.pengaduan;\r\n            this.tanggapan = response.data.data.pengaduan.tanggapan;\r\n            this.rows = response.data.data.count;\r\n          } else {\r\n            this.$bvToast.hide(\"loadingToast\");\r\n            this.message = \"Gagal menampilkan data Pengaduan.\";\r\n            this.$bvToast.show(\"message\");\r\n            this.$router.push({ name: \"login\" });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    Add: function () {\r\n      this.action = \"insert\";\r\n      this.id_pengaduan = \"\";\r\n      this.tgl_pengaduan = \"\";\r\n      this.isi_laporan = \"\";\r\n      this.id_kategori = \"\";\r\n      this.foto = \"\";\r\n      this.getKategoriDropdown();\r\n      document.getElementById(\"foto\").value = null;\r\n    },\r\n     getKategoriDropdown: function(){\r\n                //ambil data kategori untuk dropdown\r\n                let conf = { headers: { \"Authorization\" : 'Bearer ' + this.token } };\r\n                let offset = (this.currentPage - 1) * this.perPage;\r\n                this.axios.get(\"/masyarakat/kategori/\" + this.perPage + \"/\" + offset, conf)\r\n                .then(response => {\r\n                    let list_kategori = []\r\n                    let json_kategori = response.data.data.kategori\r\n                    json_kategori.forEach(element => {\r\n                        list_kategori.push({value: element.id_kategori, text: element.nama_kategori})\r\n                    });\r\n                    this.kategori = list_kategori\r\n                })\r\n            },\r\n            \r\n    Save: function () {\r\n      let conf = { headers: { Authorization: \"Bearer \" + this.token } };\r\n      this.$bvToast.show(\"loadingToast\");\r\n      this.action === \"insert\";\r\n      let form = new FormData();\r\n      form.append(\"id_pengaduan\", this.id_pengaduan);\r\n      form.append(\"tgl_pengaduan\", this.tgl_pengaduan);\r\n      form.append(\"isi_laporan\", this.isi_laporan);\r\n      form.append(\"foto\", document.getElementById(\"foto\").files[0]);\r\n      form.append(\"id_kategori\", this.id_kategori);\r\n\r\n      this.axios.post(\"/masyarakat/pengaduan\", form, conf)\r\n        .then((response) => {\r\n          this.$bvToast.hide(\"loadingToast\");\r\n          this.message = response.data.message;\r\n          this.$bvToast.show(\"message\");\r\n          this.getData();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response);\r\n        });\r\n    },\r\n    getKategori() {\r\n      let conf = { headers: { Authorization: \"Bearer \" + this.token } };\r\n      this.axios.get('kategori', conf).then((response => {\r\n        console.log(response);\r\n        this.kategori = response.data.data.kategori\r\n      }))\r\n    },\r\n  },\r\n  mounted() {\r\n    this.token = localStorage.getItem(\"Authorization\");\r\n    this.getData();\r\n  },\r\n};\r\n</script>"]}]}